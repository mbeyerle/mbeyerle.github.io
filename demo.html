<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tibi Color Wheel (08/15 2244)</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      background: black;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    svg {
      cursor: grab;
    }
    svg:active {
      cursor: grabbing;
    }
  </style>
</head>
<body>
  <svg id="wheel" width="800" height="800"></svg>

  <script>
    const width = 800, height = 800;
    const svg = d3.select("#wheel")
      .attr("viewBox", [-width/2, -height/2, width, height]);

    // Define rings with exact colors
    const rings = [
      {
        radius: [0, 100], // inner to outer radius
        colors: ["#000000","#32373b","#ebf3f3","#9c8b90","#c9c3b2","#5b3511"]
      },
      {
        radius: [100, 180],
        colors: ["#654f1f","#0c1424","#7e6b88","#59424e","#a65038","#cb5a29"]
      },
      {
        radius: [180, 260],
        colors: ["#7d8560","#416d60","#53787a","#687a9b","#79a5af","#655965"]
      },
      {
        radius: [260, 380],
        colors: [
          "#3b59a8","#bdc5e4","#824e9f","#bc93c4","#67c6ef","#03a0dc",
          "#daedda","#74c480","#059247","#e09960","#faab66","#e28125",
          "#f6851f","#ed1c24","#da1c23","#8d382e","#743e4b","#6c1e14"
        ]
      }
    ];

    // Function to draw each ring
    rings.forEach(ring => {
      const arc = d3.arc()
        .innerRadius(ring.radius[0])
        .outerRadius(ring.radius[1]);

      const pie = d3.pie().value(1)(ring.colors);

      const g = svg.append("g")
        .attr("class", "ring")
        .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", dragged));

      g.selectAll("path")
        .data(pie)
        .join("path")
        .attr("d", arc)
        .attr("fill", d => d.data)
        .attr("stroke", "black")
        .attr("stroke-width", 1);
    });

    // Drag behavior for rotating rings
    function dragstarted(event) {
      d3.select(this).raise();
      this._lastAngle = Math.atan2(event.y, event.x);
    }

    function dragged(event) {
      const angle = Math.atan2(event.y, event.x);
      const delta = angle - this._lastAngle;
      this._lastAngle = angle;

      let current = this._rotation || 0;
      current += delta * (180/Math.PI);
      this._rotation = current;

      d3.select(this).attr("transform", `rotate(${current})`);
    }
  </script>
</body>
</html>
